#pragma checksum "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "9cec17cbfb8d4418ae09a7d6baeeafb85ce7ce92"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Admin_AdminRoles), @"mvc.1.0.view", @"/Views/Admin/AdminRoles.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\_ViewImports.cshtml"
using siges;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\_ViewImports.cshtml"
using siges.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
using siges.Areas.Identity.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
using System.Collections;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
using System.Collections.Generic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9cec17cbfb8d4418ae09a7d6baeeafb85ce7ce92", @"/Views/Admin/AdminRoles.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4f34ac2a518186cd6e1fad2ab593126982fe1167", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Admin_AdminRoles : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 8 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
  
    ViewData["Title"] = "Roles Usuario";
    List <RoatechIdentityUser> model = ViewData["riuList"] as List <RoatechIdentityUser>;
    Dictionary <RoatechIdentityUser, List <string>> role = ViewData["riuDicc"] as Dictionary <RoatechIdentityUser, List <string>>;
 

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""container"">
    <div class=""row"">
        <div class=""col"">
            <h2>Administraci&oacute;n de Roles de Usuario</h2>
        </div>
    </div>
    <div class=""row"">
        <table id=""tableRoles"" data-toggle=""table"" data-search=""true"" data-show-columns=""false"" data-pagination=""true"" data-locale=""es-MX"" data-classes=""table table-hover"" data-page-size=""5""  data-page-list=""[5,10,25]"" data-show-footer=""true"" data-sort-name=""name"">
            <thead>
                <tr>
                    <th data-field=""nombre"" data-sortable=""true"" data-field=""name"">Nombre</th>
                    <th data-field=""email"" data-sortable=""true"">Correo Electr&oacute;nico</th>
                    <th data-field=""puesto"" data-sortable=""true"">Puesto</th>
                    <th data-field=""role"" data-sortable=""true"">Rol de Sistema</th>
                    <th class=""mobileHidden"">Acciones</th>
                </tr>
            </thead>
            <tbody>
");
#nullable restore
#line 32 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                 foreach (var item in model) {
                    var role2 = role[item].Count > 0 ? role[item][0] : "No asigando";
                    var nombre = item.per.Nombre + " " + item.per.Paterno + " " + item.per.Materno;
                    if(role2 != "Admin"){

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <tr>\r\n                            <td>");
#nullable restore
#line 37 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                           Write(Html.DisplayFor(modelItem => nombre));

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                            <td>");
#nullable restore
#line 38 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                           Write(Html.DisplayFor(modelItem => item.Email));

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                            <td>");
#nullable restore
#line 39 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                           Write(Html.DisplayFor(modelItem => item.per.Puesto));

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                            <td>");
#nullable restore
#line 40 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                           Write(Html.DisplayFor(modelItem => role2));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"</td>
                            <td class=""mobileHidden""><a class=""btn btn-success float_Table"" data-toggle=""tooltip"" data-placement=""bottom"" title=""Acciones"" data-original-title=""Tooltip on bottom""><i class=""fab fa-elementor""></i></a></td>
                        </tr>
");
#nullable restore
#line 43 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                    }
                }

#line default
#line hidden
#nullable disable
            WriteLiteral("            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n\r\n");
            DefineSection("scripts", async() => {
                WriteLiteral("\r\n<script>\r\n        const listRoles = ");
#nullable restore
#line 52 "C:\Users\HP EliteBook 2570p\source\repos\siges\siges\Views\Admin\AdminRoles.cshtml"
                     Write(Html.Raw(Json.Serialize(ViewData["roles"])));

#line default
#line hidden
#nullable disable
                WriteLiteral(@";
        const objRoles = new Object();
        for (const role of listRoles) {
            if(role !== ""Default"" && role !== ""Admin"")
            objRoles[`${role}`] = `${role}`
        }

    $('#tableRoles').on('click-row.bs.table', async (row, $element, field) => {
    const nombre = field[0].children[0].innerText;
    const { value: rol } = await Swal.fire({
      title: `Rol de ${nombre}`,
      input: 'select',
      confirmButtonColor: ""#67E7CF"",
      reverseButtons: true,
      confirmButtonText:""Guardar"",
      cancelButtonText:""Cancelar"",
      inputOptions: objRoles,
      inputPlaceholder: 'Roles de Usuario',
      showCancelButton: true,
      allowOutsideClick: false,
      allowEscapeKey: false,
      showCloseButton: true,
      closeButtonHtml: '<i class=""fas fa-times""></i>',
      inputValidator: (value) => {
        return new Promise((resolve) => {
          if (value !== '') {
            $.ajax({
              url: apihost + ""/Admin/AsignRoleToUser"",
      ");
                WriteLiteral(@"        method: ""POST"",
              data: {
                  ""role"":`${value}`,
                  ""user"":`${field[0].children[1].innerText}`
              },
              async: true,
              dataType: ""json"",
              success: function (respuesta2) {
                console.log(respuesta2)
                resolve()
              }
            });
          } else {
            resolve('Necesitas asignar un rol')
          }
        })
      }
    })

    if (rol) {
      Swal.fire({
        icon: 'success',
        title: '¡Éxito!',
        confirmButtonColor: ""#67E7CF"",
        confirmButtonText:""Aceptar"",
        text: `Se asigno el rol de ${rol} a ${nombre}`,
        onClose: ()=>{
          location.reload(true);
      }
      }).then((result) => {
        if (result.value) {
          location.reload(true);
        }
     })
    }
});
</script>
");
            }
            );
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public UserManager<RoatechIdentityUser> UserManager { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
